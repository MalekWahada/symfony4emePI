{% extends 'baseAdmin.html.twig' %}

{% block container %}
    <h1>Editer Emprunt</h1>



    {{ form_start(edit_form) }}
   <div class="form-row">
            <div class="col-md-4 mb-3">
    {{ form_widget(edit_form) }}
                <p id="cntr" style="color: red"></p>
                <p id="cntr1" style="color: red"></p>
            </div>
   </div>
        <button class="btn btn-icon btn-pill btn-primary" onclick="fonct()" style="width: 150px ">Editer</button>
    {{ form_end(edit_form) }}
    <br>
    {{ form_start(delete_form) }}
    <input type="submit" value="Delete" class="btn btn-icon btn-pill btn-danger" style="width: 150px ">
    {{ form_end(delete_form) }}

    <li>
        <a href="{{ path('emprunt_index') }}"> <i style="color: #003399" >Back to the list</i> </a>
    </li>
    <style>
        .required{
            font-family: verdana;
            font-size: 20px;
            font-family: "Times New Roman", Times, serif;
        }
        h1 { color: #c9d0d4; font-family: 'Helvetica Neue', sans-serif; font-size: 46px; font-weight: 100; line-height: 50px; letter-spacing: 1px; padding: 0 0 40px; border-bottom: double #555; }

    </style>
    <script>
        /*
                        document.getElementById("empruntbundle_emprunt_email").classList.add("form-control is-valid");
        */
        var x = document.getElementsByClassName("required");
        x[0].innerHTML = "Livre :";
        x[1].innerHTML= "Auteur :";
        document.getElementById("empruntbundle_emprunt_email").className = "form-control is-valid";
        document.getElementById("empruntbundle_emprunt_nomauteur").className = "form-control is-valid";
        document.getElementById("empruntbundle_emprunt_username").className = "form-control is-valid";
        document.getElementById("empruntbundle_emprunt_nomlivre").className = "form-control is-valid";
        //document.getElementById("empruntbundle_emprunt_email").style.color= "red";


    </script>
    <script>
        function fonct(){
            document.getElementById("empruntbundle_emprunt_email").className = "form-control is-valid";
            document.getElementById("empruntbundle_emprunt_nomauteur").className = "form-control is-valid";
            document.getElementById("empruntbundle_emprunt_username").className = "form-control is-valid";
            document.getElementById("empruntbundle_emprunt_nomlivre").className = "form-control is-valid";
            $day=document.getElementById("empruntbundle_emprunt_date_day").value;
            $month=document.getElementById("empruntbundle_emprunt_date_month").value;
            $year=document.getElementById("empruntbundle_emprunt_date_year").value;
            //document.location.replace("http://stackoverflow.com");
            document.getElementById("cntr").innerHTML = "";
            document.getElementById("cntr1").innerHTML = "";

            if(document.getElementById("empruntbundle_emprunt_nomauteur").value==""){
                document.getElementById("empruntbundle_emprunt_nomauteur").className = "form-control is-invalid";
            }

            if(document.getElementById("empruntbundle_emprunt_username").value==""){
                document.getElementById("empruntbundle_emprunt_username").className = "form-control is-invalid";
            }

            if(document.getElementById("empruntbundle_emprunt_nomlivre").value==""){
                document.getElementById("empruntbundle_emprunt_nomlivre").className = "form-control is-invalid";
            }


            var $date=new Date();
            $dd=$date.getDate();
            $mm=$date.getMonth();
            $yy=$date.getFullYear()
            a=0;
            if($year<$yy) {
                document.getElementById("cntr").innerHTML = "Date erronée!!";
                a=1;
            }
            if ($mm > $month) {
                if($year<=$yy) {
                    document.getElementById("cntr").innerHTML = "Date erronée!!";
                    a=1;
                }
            }
            if($day<$dd) {

                if ($mm >= $month) {

                    if($year<=$yy) {
                        document.getElementById("cntr").innerHTML = "Date erronée!!";
                        a=1;
                    }
                }
            }
            var expressionReguliere = /^(([^<>()[]\.,;:s@]+(.[^<>()[]\.,;:s@]+)*)|(.+))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$/;
            //document.getElementById(resultat).innerHTML = ;

            if (!expressionReguliere.test(document.getElementById("empruntbundle_emprunt_email").value)) {
                document.getElementById("empruntbundle_emprunt_email").className = "form-control is-invalid";
                document.getElementById("cntr1").innerHTML = " L'adresse mail n'est pas valide";
                document.getElementById("cntr1").style.color = "red";
                a=1;

            }

            if(a==1){
                return false;
            }else{

               r= confirm("vous vouler vraiment modifier ");
               if(r==true){

                   document.location.replace("http://localhost/project/web/app_dev.php/emprunt/emprunt/");
                   return true;
               }else{
                   return false;
               }
            }
            return true;
        }

    </script>

{% endblock %}
